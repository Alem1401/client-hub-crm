<div class="list-container">
  <!-- Header Section -->
  <div class="page-header">
    <div class="header-content">
      <div class="header-left">
        <div class="header-icon">
          <mat-icon>people</mat-icon>
        </div>
        <div class="header-text">
          <h1>Client Management</h1>
          <p class="header-subtitle">Manage and organize your client portfolio</p>
        </div>
      </div>
      <button mat-raised-button class="primary-btn" [routerLink]="['form']">
        <mat-icon>person_add</mat-icon>
        Add New Client
      </button>
    </div>
  </div>

  <!-- Stats Summary -->
  <div class="stats-row">
    <div class="mini-stat">
      <div class="mini-stat-icon blue">
        <mat-icon>groups</mat-icon>
      </div>
      <div class="mini-stat-content">
        <span class="mini-stat-value">{{ clients.length }}</span>
        <span class="mini-stat-label">Total Clients</span>
      </div>
    </div>
    <div class="mini-stat">
      <div class="mini-stat-icon green">
        <mat-icon>person_add</mat-icon>
      </div>
      <div class="mini-stat-content">
        <span class="mini-stat-value">{{ getRecentClientsCount() }}</span>
        <span class="mini-stat-label">Added This Month</span>
      </div>
    </div>
  </div>

  <!-- Content Card -->
  <div class="content-card">
    <!-- Search and Filter Bar -->
    <div class="toolbar">
      <div class="search-wrapper">
        <mat-icon class="search-icon">search</mat-icon>
        <input 
          type="text" 
          class="search-input" 
          placeholder="Search clients by name, email, or city..." 
          (input)="onSearch($event.target.value)">
      </div>
    </div>

    <!-- Table Section -->
    <div class="table-wrapper">
      <table class="data-table" *ngIf="clients.length > 0">
        <thead>
          <tr>
            <th>Client</th>
            <th>Contact</th>
            <th>Location</th>
            <th class="centered">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let client of pagedClients" class="table-row">
            <td>
              <div class="client-cell">
                <div class="client-avatar">
                  {{ client.firstName?.charAt(0) }}{{ client.lastName?.charAt(0) }}
                </div>
                <div class="client-info">
                  <span class="client-name">{{ client.firstName }} {{ client.lastName }}</span>
                  <span class="client-id">ID: {{ client.id }}</span>
                </div>
              </div>
            </td>
            <td>
              <div class="contact-cell">
                <div class="contact-item" *ngIf="client.email">
                  <mat-icon>email</mat-icon>
                  <span>{{ client.email }}</span>
                </div>
                <div class="contact-item" *ngIf="client.phoneNumber">
                  <mat-icon>phone</mat-icon>
                  <span>{{ client.phoneNumber }}</span>
                </div>
                <span class="na-text" *ngIf="!client.email && !client.phoneNumber">No contact info</span>
              </div>
            </td>
            <td>
              <div class="location-badge">
                <mat-icon>location_on</mat-icon>
                <span>{{ client.city }}</span>
              </div>
            </td>
            <td class="centered">
              <div class="action-buttons">
                <button class="action-btn view" matTooltip="View Details" (click)="onView(client)">
                  <mat-icon>visibility</mat-icon>
                </button>
                <button class="action-btn edit" matTooltip="Edit Client" [routerLink]="['form', client.id]">
                  <mat-icon>edit</mat-icon>
                </button>
                <button class="action-btn delete" matTooltip="Delete Client" (click)="onDeleteClick(client)">
                  <mat-icon>delete</mat-icon>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- Empty State -->
      <div class="empty-state" *ngIf="clients.length === 0">
        <div class="empty-icon">
          <mat-icon>people_outline</mat-icon>
        </div>
        <h3>No Clients Found</h3>
        <p>Start building your client portfolio by adding your first client</p>
        <button mat-raised-button class="primary-btn" [routerLink]="['form']">
          <mat-icon>person_add</mat-icon>
          Add Your First Client
        </button>
      </div>
    </div>

    <!-- Paginator -->
    <div class="paginator-wrapper" *ngIf="clients.length > 0">
      <mat-paginator 
        [length]="clients.length" 
        [pageSize]="pageSize" 
        [pageSizeOptions]="[10, 25, 50, 100]"
        (page)="onPageChange($event)" 
        showFirstLastButtons>
      </mat-paginator>
    </div>
  </div>

  <!-- Confirmation Dialog -->
  @if(showConfirmation){
    <app-confirmation-window 
      message="Are you sure you want to delete this client?" 
      (cancel)="onCancelDelete()" 
      (confirm)="onConfirmDelete()">
    </app-confirmation-window>
  }
</div>
