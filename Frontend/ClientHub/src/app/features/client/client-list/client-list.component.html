<div class="client-list-container">
  <mat-card class="client-list-card">
    <mat-card-header>
      <mat-card-title>
        <div class="header-section">
          <div class="title-section">
            <mat-icon class="header-icon">people</mat-icon>
            <h2>Client Management</h2>
          </div>
          <button mat-raised-button color="primary" class="add-client-btn" [routerLink]="['form']">
            <mat-icon>add</mat-icon>
            Add New Client
          </button>
        </div>
      </mat-card-title>
    </mat-card-header>

    <mat-card-content>

      <div class="search-section">
        <mat-form-field appearance="outline" class="search-field">
          <mat-label>Search clients</mat-label>
          <input matInput placeholder="Search by name, email, or city" (input)="onSearch($event.target.value)">
          <mat-icon matPrefix>search</mat-icon>
        </mat-form-field>
      </div>


      <div class="table-container">
        <table class="client-table responsive-table">
          <thead>
            <tr>
              <th>First Name</th>
              <th>Last Name</th>
              <th>Email</th>
              <th>Phone</th>
              <th>City</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let client of pagedClients" class="client-row">
              <td>{{ client.firstName }}</td>
              <td>{{ client.lastName }}</td>
              <td><span class="email-cell">{{ client.email || 'N/A' }}</span></td>
              <td><span class="phone-cell">{{ client.phoneNumber || 'N/A' }}</span></td>
              <td class="centered"><mat-chip class="city-chip">{{ client.city }}</mat-chip></td>
              <td class="centered">
                <div class="action-buttons">
                  <button mat-icon-button color="primary" matTooltip="View Details" aria-label="View Details"
                    (click)="onView(client)">
                    <mat-icon>visibility</mat-icon>
                  </button>
                  <button mat-icon-button color="accent" matTooltip="Edit Client" aria-label="Edit Client"
                    [routerLink]="['form', client.id]">
                    <mat-icon>edit</mat-icon>
                  </button>
                  <button mat-icon-button color="warn" matTooltip="Delete Client" aria-label="Delete Client"
                    (click)="confirmation = true">
                    <mat-icon>delete</mat-icon>
                  </button>
                  @if(confirmation){
                    <app-confirmation-window message="Are you sure you want to delete this user ?" (cancel)="confirmation = false" (confirm)="onDelete(client)">

                    </app-confirmation-window>
                  }
                </div>
              </td>
            </tr>
          </tbody>
        </table>


        <div class="empty-state" *ngIf="clients.length === 0">
          <mat-icon class="empty-icon">people_outline</mat-icon>
          <h3>No Clients Found</h3>
          <p>Start by adding your first client to the system</p>
          <button mat-raised-button color="primary" [routerLink]="['form']">
            <mat-icon>add</mat-icon>
            Add Client
          </button>
        </div>
      </div>

      <mat-paginator [length]="clients.length" [pageSize]="pageSize" [pageSizeOptions]="[10, 25, 50, 100]"
        (page)="onPageChange($event)" showFirstLastButtons class="client-paginator">
      </mat-paginator>
    </mat-card-content>
  </mat-card>
</div>